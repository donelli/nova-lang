{"version":3,"file":"extension.js","mappings":"kCAAAA,EAAOC,QAAUC,QAAQ,W,OCAzBF,EAAOC,QAAUC,QAAQ,kB,QCAzBF,EAAOC,QAAUC,QAAQ,QCCrBC,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaL,QAGrB,IAAID,EAASG,EAAyBE,GAAY,CAGjDJ,QAAS,IAOV,OAHAO,EAAoBH,GAAUL,EAAQA,EAAOC,QAASG,GAG/CJ,EAAOC,Q,uGCrBf,cACA,SACA,SAEA,IAAIQ,EAmBJ,SAASC,EAAgBC,GAExB,GAAuB,YAAnBA,EAAIC,WACP,OAGDH,EAAqBI,IAAIF,EAAIG,SAAKP,GAElC,MAAMO,EAAMH,EAAIG,IAAIC,QAEpB,IAAAC,UAAS,uCAAuCF,4CAEhD,IAAAG,UAAS,kCAAmC,SAAU,CAACC,EAAKC,KAC3D,GAAID,EAEH,YADAE,EAAOC,OAAOC,iBAAiBJ,EAAIK,SAIpC,MAAMC,EAAaC,KAAKC,MAAMP,GACxBQ,EAAO,GAEbC,QAAQC,IAAIL,GAEZ,IAAK,IAAIN,KAAOM,EAAWM,OAAQ,CAClC,IAAIC,EAAQ,IAAIX,EAAOY,SAASd,EAAIe,MAAMF,MAAMG,IAAKhB,EAAIe,MAAMF,MAAMI,QACjEC,EAAM,IAAIhB,EAAOY,SAASd,EAAIe,MAAMG,IAAIF,IAAKhB,EAAIe,MAAMG,IAAID,QAC/DR,EAAKU,KAAK,IAAIjB,EAAOkB,WAAW,IAAIlB,EAAOmB,MAAMR,EAAOK,GAAMlB,EAAIsB,KAAO,IAAMtB,EAAIK,QAASH,EAAOqB,mBAAmBC,QAGvH,IAAK,IAAIC,KAAQnB,EAAWoB,SAAU,CACrC,IAAIb,EAAQ,IAAIX,EAAOY,SAASW,EAAKV,MAAMF,MAAMG,IAAKS,EAAKV,MAAMF,MAAMI,QACnEC,EAAM,IAAIhB,EAAOY,SAASW,EAAKV,MAAMG,IAAIF,IAAKS,EAAKV,MAAMG,IAAID,QACjER,EAAKU,KAAK,IAAIjB,EAAOkB,WAAW,IAAIlB,EAAOmB,MAAMR,EAAOK,GAAMO,EAAKH,KAAO,IAAMG,EAAKpB,QAASH,EAAOqB,mBAAmBI,UAGzHpC,EAAqBI,IAAIF,EAAIG,IAAKa,GAElCC,QAAQC,IAAIF,MAtDd,oBAAyBmB,GAExBrC,EAAuBW,EAAO2B,UAAUC,2BAA2B,WAEnE,IAAIC,EAAiB7B,EAAO8B,UAAUC,uBAAsBC,IAC3D1C,EAAgB0C,MAGbC,EAAmBjC,EAAO8B,UAAUI,uBAAsBF,IAC7D1C,EAAgB0C,MAGjBN,EAAQS,cAAclB,KAAKY,EAAgBI,EAAkB5C,IAG9D,2B","sources":["webpack://donelli-recital/external commonjs \"vscode\"","webpack://donelli-recital/external node-commonjs \"child_process\"","webpack://donelli-recital/external node-commonjs \"fs\"","webpack://donelli-recital/webpack/bootstrap","webpack://donelli-recital/./src/extension.ts"],"sourcesContent":["module.exports = require(\"vscode\");","module.exports = require(\"child_process\");","module.exports = require(\"fs\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { exec, execSync } from 'child_process';\nimport { open, openSync, readFile, readSync } from 'fs';\nimport * as vscode from 'vscode';\n\nlet diagnosticCollection: vscode.DiagnosticCollection;\n\nexport function activate(context: vscode.ExtensionContext) {\n\t\n\tdiagnosticCollection = vscode.languages.createDiagnosticCollection('recital');\n\t\n\tlet disposableOpen = vscode.workspace.onDidOpenTextDocument(document => {\n\t\tloadDiagnostics(document);\n\t});\n\n\tlet disposableChange = vscode.workspace.onDidSaveTextDocument(document => {\n\t\tloadDiagnostics(document);\n\t});\n\t\n\tcontext.subscriptions.push(disposableOpen, disposableChange, diagnosticCollection);\n}\n\nexport function deactivate() {}\n\nfunction loadDiagnostics(doc: vscode.TextDocument) {\n\n\tif (doc.languageId !== 'recital') {\n\t\treturn;\n\t}\n\t\n\tdiagnosticCollection.set(doc.uri, undefined);\n\t\n\tconst uri = doc.uri.fsPath;\n\t\n\texecSync(`E:\\\\Projects\\\\recital\\\\rt.exe parse ${uri} -json E:\\\\Projects\\\\recital\\\\out.json`);\n\t\n\treadFile('E:\\\\Projects\\\\recital\\\\out.json', 'utf-8' , (err, data) => {\n\t\tif (err) {\n\t\t\tvscode.window.showErrorMessage(err.message);\n\t\t\treturn;\n\t\t}\n\n\t\tconst diagnostic = JSON.parse(data);\n\t\tconst diag = [];\n\t\t\n\t\tconsole.log(diagnostic);\n\t\t\n\t\tfor (let err of diagnostic.errors) {\n\t\t\tlet start = new vscode.Position(err.range.start.row, err.range.start.column);\n\t\t\tlet end = new vscode.Position(err.range.end.row, err.range.end.column);\n\t\t\tdiag.push(new vscode.Diagnostic(new vscode.Range(start, end), err.type + ' ' + err.message, vscode.DiagnosticSeverity.Error));\n\t\t}\n\n\t\tfor (let warn of diagnostic.warnings) {\n\t\t\tlet start = new vscode.Position(warn.range.start.row, warn.range.start.column);\n\t\t\tlet end = new vscode.Position(warn.range.end.row, warn.range.end.column);\n\t\t\tdiag.push(new vscode.Diagnostic(new vscode.Range(start, end), warn.type + ' ' + warn.message, vscode.DiagnosticSeverity.Warning));\n\t\t}\n\n\t\tdiagnosticCollection.set(doc.uri, diag);\n\n\t\tconsole.log(diag);\n\t\t\n\t\t});\n\t\n}\n"],"names":["module","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","diagnosticCollection","loadDiagnostics","doc","languageId","set","uri","fsPath","execSync","readFile","err","data","vscode","window","showErrorMessage","message","diagnostic","JSON","parse","diag","console","log","errors","start","Position","range","row","column","end","push","Diagnostic","Range","type","DiagnosticSeverity","Error","warn","warnings","Warning","context","languages","createDiagnosticCollection","disposableOpen","workspace","onDidOpenTextDocument","document","disposableChange","onDidSaveTextDocument","subscriptions"],"sourceRoot":""}